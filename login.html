<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>ä½œè€…éªŒè¯ Admin Login</title>
    <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.12.0/dist/av-min.js"></script>
    <style>
        :root {
            --bg: #fffdf5;
            --text: #333;
            --brand: #ff4757;
        }

        /* 1. è‡ªåŠ¨é€‚é…æ·±è‰²æ¨¡å¼ï¼Œè§£å†³ä½ è¯´çš„çœ‹ä¸æ¸…é—®é¢˜ */
        body.dark {
            --bg: #121212;
            --text: #f1f2f6;
            --brand: #ff6b81;
        }

        body {
            text-align: center;
            padding-top: 100px;
            font-family: sans-serif;
            background: var(--bg);
            color: var(--text);
            transition: 0.3s;
        }

        input {
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #444;
            background: #222;
            color: #fff;
            width: 200px;
        }

        /* 2. ç«™é•¿è¦æ±‚çš„ç‚¹å‡»æ”¾å¤§åŠ¨æ•ˆ */
        button {
            padding: 10px 25px;
            cursor: pointer;
            border-radius: 8px;
            border: none;
            background: #eee;
            color: #000;
            font-weight: bold;
            transition: 0.2s;
        }

        button:active {
            transform: scale(1.1);
        }

        .back-link {
            color: #888;
            text-decoration: none;
            display: inline-block;
            margin-top: 20px;
            font-weight: bold;
        }

        .back-link:active {
            transform: scale(1.1);
            color: var(--brand);
        }
    </style>
</head>

<body>
    <h2 data-zh="ğŸ‘‘ ç®¡ç†å‘˜éªŒè¯" data-en="ğŸ‘‘ Admin Login">ğŸ‘‘ ç®¡ç†å‘˜éªŒè¯</h2>

    <div style="display: inline-flex; gap: 10px; align-items: center;">
        <input type="password" id="pw" data-zh-ph="è¯·è¾“å…¥å¯†ç ..." data-en-ph="Enter Password...">
        <button onclick="go()" data-zh="éªŒè¯" data-en="Verify">éªŒè¯</button>
    </div>

    <br><br>
    <a href="index.html" class="back-link" data-zh="ğŸ  è¿”å›é¦–é¡µ" data-en="ğŸ  Back Home">ğŸ  è¿”å›é¦–é¡µ</a>

    <script>
        // 4. åˆå§‹åŒ–ç”µæº
        AV.init({
            appId: "M7KeNAw2myFEaXvSEJPbtPpA-MdYXbMMI",
            appKey: "O9DYEDbkHLvecHlEact4ANKO",
            serverURL: "https://m7kenaw2.api.lncldglobal.com"
        });

        // 5. è¡¥å…¨è¢«æˆ‘â€œåƒæ‰â€çš„ç¿»è¯‘åº”ç”¨é€»è¾‘
        function applyLanguage() {
            const lang = localStorage.getItem('lang') || 'zh';
            const isDark = localStorage.getItem('theme') === 'dark';

            if (isDark) document.body.classList.add('dark');

            // è½¬æ¢æ‰€æœ‰å¸¦ data-zh çš„æ–‡å­—
            document.querySelectorAll('[data-zh]').forEach(el => {
                el.innerText = (lang === 'zh' ? el.getAttribute('data-zh') : el.getAttribute('data-en'));
            });

            // è½¬æ¢è¾“å…¥æ¡†çš„æç¤ºæ–‡å­— (Placeholder)
            document.querySelectorAll('[data-zh-ph]').forEach(el => {
                el.placeholder = (lang === 'zh' ? el.getAttribute('data-zh-ph') : el.getAttribute('data-en-ph'));
            });
        }

        async function go() {
            const input = document.getElementById('pw').value.trim();
            if (!input) return;

            // 1. å°†è¾“å…¥çš„å¯†ç è¿›è¡Œå“ˆå¸Œå¤„ç†
            const msgBuffer = new TextEncoder().encode(input);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const inputHash = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');

            // 2. é¢„è®¾çš„ ClarkSuperPassword å¯†æ–‡
            const correctHash = "7c067d5583783a33945c71701e6702d733190f8f8f2b7b5123d46777651a0d8a";
            // ä¸ºäº†é˜²æ­¢å¯†ç æ³„éœ²ï¼Œä½¿ç”¨å“ˆå¸Œå€¼è¿›è¡Œè®¡ç®—å’Œä¸¥é‡
            if (inputHash === correctHash) {
                // éªŒè¯é€šè¿‡
                sessionStorage.setItem('isAdmin', 'true');
                window.location.href = 'author.html';
            } else {
                const lang = localStorage.getItem('lang') || 'zh';
                alert(lang === 'zh' ? 'éªŒè¯å¤±è´¥ï¼' : 'Auth Failed!');
            }
        }

        // é¡µé¢åŠ è½½å³åˆ»æ‰§è¡Œç¿»è¯‘
        applyLanguage();
    </script>
</body>

</html>